# Проект 3. Рейтинг отеля по данным сайта Booking.<br> EDA + Feature Engineering. Соревнование на Kaggle
<table>
  <tr style="vertical-align:middle">
    <!-- <th><img src = 'https://i.hh.ru/logos/svg/hh.ru__min_.svg?v=11032019'></th> -->
    <!-- <th><img style="vertical-align:middle" img src = https://lms.skillfactory.ru/static/rg-theme/images/logo-header.svg></th> -->
    <th><img style="vertical-align:middle" img src = https://cf.bstatic.com/static/img/bcom_logo_blue_bg/f12f834e849b2a7f752a14b2598a6ddfeda1e713.svg height='40'></th>
    <th><img style="vertical-align:middle" img src = https://static.tildacdn.com/tild3862-3932-4061-b763-363135393134/logo.svg></th>
  </tr>
</table>

## Оглавление
[1. Описание проекта](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Описание-проекта)

[2. Какой кейс решаем?](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Какой-кейс-решаем)

[3. Краткая информация о данных](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Краткая-информация-о-данных)

[4. Этапы работы над проектом](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Этапы-работы-над-проектом)

[5. Результаты](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Результаты)

  > Перейти прямо к [презентации решения кейса](https://github.com/yaroslav-vorobyov/SF_DST/blob/main/PROJECT-3/Project-3.ipynb)

[6. Выводы](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Выводы)  

[7. Фидбэк от ментора](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Фидбэк-от-ментора)

<br>

## Описание проекта
Представьте, что вы работаете дата-сайентистом в компании *Booking*. Одна из проблем компании — это нечестные отели, которые накручивают себе рейтинг. Одним из способов обнаружения таких отелей является построение модели, которая предсказывает рейтинг отеля. Поставлена задача создать такую модель, предсказывающую рейтинг отеля. Если предсказания модели сильно отличаются от фактического результата, то, возможно, отель ведёт себя нечестно, и его стоит проверить.

<br>

### Какой кейс решаем?
Цель проекта: построить модель на основе алгоритмов машинного обучения, которая предсказывает рейтинг отеля.

Задачи проекта:

1. Ознакомиться с входными данными;
2. Изучить пример машинного обучения (scikit-learn класс RandomForestRegressor, и закрепить LightAutoML);
3. Выполнить подготовку данных, которые будут использованы для обучения модели - формирование новые признаков, преобразование и извлечение данных из имеющихся;
4. Проверить эффективность предлагаемой модели, используя метрику MAPE;
5. Принять участие в соревнованиях на площадке Kaggle.com.

<br>

**Условия:**
- Решение оформляется только в *Jupyter Notebook*;
- Решение оформляется в соответствии с *ноутбуком-шаблоном* на Kaggle.com;
- Не следует создавать много ячеек для решения задачи — это проявляет неудобства при проверке;
- Код на *Python* должен быть читаемым. Не забывать про отступы, разметку и комментарии в коде;
- Выводы по каждому этапу оформляются в формате *Markdown* в отдельной ячейке.

<br>

**Метрика качества:**
* Качество кода (соблюдение стандартов оформления PEP-8, комментирование кода, README к проекту). Оформление проекта на GitHub, GitLab, Kaggle;
* Очистка данных;
* Исследование данных (качество визуализации, наличие идей, гипотез, комментариев);
* Генерация признаков;
* Отбор признаков;
* Преобразование признаков;
* Качество решения: результат метрики MAPE.

За каждый критерий можно получить **от 0 до 3 баллов**.
<!-- <table>
  <tbody>
    <tr style="vertical-align:middle">
      <td style="background-color: #2e765e; color: white; font-weight: bold">2 балла</td>
      <td style="align:left">Правильность решения задач, логичность построения запросов</td>
    </tr>
    <tr>
      <td style="background-color: #2e765e; color: white; font-weight: bold">2 балла</td>
      <td style="align:left">Читабельность и верное форматирование запросов и кода на Python, наличие комментариев в запросах;<br>Аккуратность оформления решения</td>
    </tr>
    <tr>
      <td style="background-color: #2e765e; color: white; font-weight: bold">2 балла</td>
      <td style="align:left">Логичность и полнота выводов</td>
    </tr>
    <tr>
      <td style="background-color: #2e765e; color: white; font-weight: bold">2 балла</td>
      <td style="align:left">Дополнительные исследования данных</td>
    </tr>
  </tbody>
</table> -->

| **Количество баллов** | **Критерии оценивания** |
| --- | --- |
| **0 баллов** | Задание не выполнено или результатами работы невозможно воспользоваться на практике |
| **1 балл** | Есть большие неточности в выполнении задания |
| **2 балла** | Задача решена, требуются минимальные доработки |
| **3 балла** | Задача решена полностью, результат можно использовать на практике |

* Необходимо: ответить на контрольные вопросы, сдать проект на проверку, загрузив ноутбук-шаблон со своим решением на GitHub. Для того чтобы успешно сдать проект, **достаточно набрать 12 баллов**.

**Максимальное количество баллов** за задание — 21.

<br>

**Что на практике:**
-   Учусь писать отличный код на Python;
-   Учусь взаимодейстовать с международной платформой [Kaggle](http://kaggle.com/);
-   Учусь строить модель машинного обучения на международной платформе Kaggle и участвовать в соревнованиях;
-   Учусь сравнивать эксперименты с точки зрения метрик, параметров;
-   Учусь следить за моделью от создания до вывода в продакшен;
-   Учусь делиться своим проектом, оставить проект приватным или сделать его общедоступным;
-   Учусь эффективно работать с IDE VSCode;
-   Повышаю квалификацию по методам преобразования и очистки данных; 
-   Повышаю квалификацию с GitHub.

:arrow_up:[к оглавлению](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Оглавление)

<br>

### Краткая информация о данных

В данном проекте первоначальные данные представлены в виде совокупного датасета размером: свыше 515000 строк, 16 столбцов, типа object, float64 и int64, в отдельных столбцах присутствуют пропуски и дубликаты. В связи с этим необходимо более детально проанализировать структуру первоначальных данных, сделать выводы о дальнейших преобразованиях. Построить обучающую модель, которая должна предсказывать рейтинг отеля по данным сайта Booking на основе имеющихся в датасете данных.

Датасеты:

* hotels.csv - первоначальные данные для исследования с учебной платформы Skillfactory, используется в предпроектной работе - pre_Project-3.ipynb;
* hotels_train.csv - первоначальные данные для исследования;
* hotels_test.csv - данные для валидации модели;
* submission.csv - результат обучения модели, представленный с Kaggle.com;
* submission_rand_forest_regr.csv - результат обучения модели scikit-learn RandomForestRegressor;
* submission_tabular_automl.csv - результат обучения модели LightAutoML.

Первоначальная версия датасета содержит 17 полей со следующей информацией:

* *hotel_address* - адрес отеля;
* *review_date* - дата, когда рецензент разместил соответствующий отзыв;
* *average_score* - средний балл отеля, рассчитанный на основе последнего комментария за последний год;
* *hotel_name* - название отеля;
* *reviewer_nationality* - страна рецензента;
* *negative_review* - отрицательный отзыв, который рецензент дал отелю;
* *review_total_negative_word_counts* - общее количество слов в отрицательном отзыв;
* *positive_review* - положительный отзыв, который рецензент дал отелю;
* *review_total_positive_word_counts* - общее количество слов в положительном отзыве;
* *reviewer_score* - оценка, которую рецензент поставил отелю на основе своего опыта;
* *total_number_of_reviews_reviewer_has_given* - количество отзывов, которые рецензенты дали в прошлом;
* *total_number_of_reviews* - общее количество действительных отзывов об отеле;
* *tags* - теги, которые рецензент дал отелю;
* *days_since_review* - количество дней между датой проверки и датой очистки;
* *additional_number_of_scoring* - есть также некоторые гости, которые просто поставили оценку сервису, но не оставили отзыв. Это число указывает, сколько там действительных оценок без проверки;
* *lat* - географическая широта отеля;
* *lng* - географическая долгота отеля.

<br>

### Требования для работы
*   Основой интерпретатор - Python 3.10 (у меня взят из Windows App Store для максимальной бесшовной интеграции с VSCode);
*   Дополнительные требования перечислены в requirements.txt (получены командой pip freeze > requirements.txt);
*   Установка всех недостающих дополнительных компонент:

            pip install -r requirements.txt

*   В проекте используется:
    
    *   scikit-learn:
            
            pip install -U scikit-learn
    
    Документация по использованию scikit-learn - [Guide scikit-learn](https://scikit-learn.org/stable/user_guide.html)
    *   LightAutoML:

            pip install -U lightautoml

    Документация по использованию LightAutoML - [GitHub LightAutoML](https://lightautoml.readthedocs.io/en/latest/index.html)

*   Для выгрузки исходного датасета, применил надстройку GitHub - [Git LFS](https://git-lfs.github.com/). 

    Документация по использованию Git LFS - [Docs Git LFS](https://github.com/git-lfs/git-lfs/tree/main/docs)

:arrow_up:[к оглавлению](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Оглавление)

<br>

### Этапы работы над проектом
- Ознакомление с описанием задачи;
- Знакомство с данными;
- Импортирование необходимых библиотек;
- Загрузка данных и объединение трейн и тестовых данных в один датасет для корректной одновременной обработки признаков;
- Изучение датасета на предмет наличия пропусков и типов данных;
- Обработка данных: извлечение данных из выборки, создание новых признаков;
- Очистка и отбор признаков: удаление признаков, на которых модель обучаться не будет, отбор признаков на основании мультиколлинеарности, а также отбор признаков по значимости, по 2 методикам - раздельно для категориальных ("хи-квадрат") и непрерывных признаков (ANOVA);
- Разделение данных для модели: выделение тестовой части, разделение тренингового датасета: 80% всех данных - на обучение, 20% данных - на валидацию, проверка размерности разделённых датасетов;
- Построение и обучение модели;
- Сравнение предсказанных значений с реальными, и оценка насколько они, в среднем, отличаются. В качестве метрики используется Mean Absolute Error (MAE) и Mean Absolute Percentage Error (MAPE);
- Проверка соответствия написанного кода стандарту PEP8;
- Оформление проекта;
- Загрузка кода на площадку Kaggle для участия в соревновании и дубликация на GitHub.

<br>

### Результаты:

Проект c корректным выполнением кейса ["Рейтинг отеля по данным сайта Booking"](https://github.com/yaroslav-vorobyov/SF_DST/blob/main/PROJECT-3/Project-3.ipynb).

<br>

### Выводы
В процессе выполнения кейса первоначальные данные были:
* Внимательно изучены исходные данные и проанализированы;
* Проведена подготовка данных к использованию: очистка, преобразование, исключение, создание признаков;
* Проведён обучающий эксперимент, построены 2 обучающие модели;
* Построена обучающая модель, основанная на алгоритмах машинного обучения, которая предсказывает рейтинг отеля;
* Принято участие в соревновании по машинному обучению.

Для обучения модели, были взяты 29 значимых признака - 14 категориальных и 15 числовых. В результате был достигнут показатель МАРЕ:

1) LightAutoML - 11.78034948 (на Kaggle - 11.80451843);
2) RandomForestRegressor - 12.06862522 (на Kaggle - 12.09183684).

Несмотря на оценки вычисленные в ноутбуке, в лидерборде показывает общую оценку - 11.85073.

Это является отличным результатом - 7-е место в лидерборде по состоянию на 15.03.2023 г.

<br>

:arrow_up:[к оглавлению](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3#Оглавление)

<br>

### Фидбэк от ментора
<!-- * Фидбэк PROJECT-3.url - содержит ссылку на отзыв, файл находится на Google Drive ментора -->
* Фидбэк PROJECT-3.pdf - версия отзыва с полным оформлением, если по ссылке файл будет удалён
* Фидбэк PROJECT-3.txt - текстовая версия отзыва, если по ссылке файл будет удалён

Перейти к [отзыву](https://github.com/yaroslav-vorobyov/SF_DST/tree/main/PROJECT-3/docs)

<br>

Если информация по этому проекту покажется вам интересной или полезной, то я буду очень вам благодарен, если отметите репозиторий и профиль ⭐️⭐️⭐️-дами.